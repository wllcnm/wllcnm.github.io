<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>AppleMusic安装历程</title>
      <link href="/posts/db0b4122.html"/>
      <url>/posts/db0b4122.html</url>
      
        <content type="html"><![CDATA[<h1 id="RNM-什么垃圾微软商店-想下Apple-Music-nm进度条就没带动的"><a href="#RNM-什么垃圾微软商店-想下Apple-Music-nm进度条就没带动的" class="headerlink" title="RNM,什么垃圾微软商店,想下Apple Music,nm进度条就没带动的"></a>RNM,什么垃圾微软商店,想下Apple Music,nm进度条就没带动的</h1><p>  最近想下个win版的Apple Music,只有微软商店提供下载,但是这龟速,进度条没带动的,微软能不能管管你的商店,折腾了一个小时后放弃了,无法解决这下载速度</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230505215853797.png" alt="image-20230505215853797"></p><h2 id="BUT-我找到了一个方法完美替代客户端"><a href="#BUT-我找到了一个方法完美替代客户端" class="headerlink" title="BUT,我找到了一个方法完美替代客户端"></a>BUT,我找到了一个方法完美替代客户端</h2><p>方法来源于<a href="https://www.bilibili.com/video/BV1p8411N7xJ">https://www.bilibili.com/video/BV1p8411N7xJ</a></p><p>使用Edge浏览器打开Apple Music官网,将网站添加为应用</p><p>进入<strong>Apple Music</strong>官网 <a href="https://music.apple.com/cn/listen-now">‎Apple Music</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230505215506700.png" alt="image-20230505215506700"></p><p><strong>点击edge浏览器右上角三个点</strong></p><p>添加为应用就行</p><p>运行效果:</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230505215652742.png" alt="image-20230505215652742"></p><p>效果完美媲美客户端的Apple Music</p>]]></content>
      
      
      <categories>
          
          <category> 碎碎念 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日常生活 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2024届暑假实习投递记录</title>
      <link href="/posts/db0b4123.html"/>
      <url>/posts/db0b4123.html</url>
      
        <content type="html"><![CDATA[<h1 id="2024届暑假实习投递记录"><a href="#2024届暑假实习投递记录" class="headerlink" title="2024届暑假实习投递记录"></a>2024届暑假实习投递记录</h1><h2 id="校招帮小程序全投"><a href="#校招帮小程序全投" class="headerlink" title="校招帮小程序全投:"></a>校招帮小程序全投:</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230304225417959.png" alt="image-20230304225417959"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230304225448553.png" alt="image-20230304225448553"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230304225500610.png" alt="image-20230304225500610"></p><h2 id="官网投"><a href="#官网投" class="headerlink" title="官网投"></a>官网投</h2><h4 id="1-特斯拉-投递时间-2023-3-4-22-30-当前状态-初筛"><a href="#1-特斯拉-投递时间-2023-3-4-22-30-当前状态-初筛" class="headerlink" title="1.特斯拉 投递时间:2023.3.4 22:30  当前状态:初筛"></a>1.特斯拉 投递时间:2023.3.4 22:30  当前状态:初筛</h4><p>官网:<a href="https://app.mokahr.com/campus-recruitment/tesla/91939#/">特斯拉中国 - 校园招聘 (mokahr.com)</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230304222056356.png" alt="image-20230304222056356"></p><h4 id="2-携程-投递时间-2023-3-4-22-22-当前状态-欢迎投递携程集团"><a href="#2-携程-投递时间-2023-3-4-22-22-当前状态-欢迎投递携程集团" class="headerlink" title="2.携程 投递时间:2023.3.4 22:22 当前状态:欢迎投递携程集团"></a>2.携程 投递时间:2023.3.4 22:22 当前状态:欢迎投递携程集团</h4><p>官网:<a href="https://campus.ctrip.com/campus-recruitment/trip/37757/#/candidateHome/applications">https://campus.ctrip.com/campus-recruitment/trip/37757/#/candidateHome/applications</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230304222341428.png" alt="image-20230304222341428"></p><h4 id="3-拼多多-投递时间-2023-03-03-15-40-17-当前状态-待处理"><a href="#3-拼多多-投递时间-2023-03-03-15-40-17-当前状态-待处理" class="headerlink" title="3.拼多多 投递时间:2023-03-03 15:40:17 当前状态:待处理"></a>3.拼多多 投递时间:2023-03-03 15:40:17 当前状态:待处理</h4><p>官网:<a href="https://careers.pinduoduo.com/campus/personal-center">https://careers.pinduoduo.com/campus/personal-center</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230304222506886.png" alt="image-20230304222506886"></p><h4 id="4-腾讯-投递时间-2023-3-3-当前状态"><a href="#4-腾讯-投递时间-2023-3-3-当前状态" class="headerlink" title="4.腾讯 投递时间:2023.3.3 当前状态:"></a>4.腾讯 投递时间:2023.3.3 当前状态:</h4><p>官网:<a href="https://join.qq.com/progress.html">https://join.qq.com/progress.html</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230304222808423.png" alt="image-20230304222808423"></p><h4 id="5-美团-投递时间-2023-3-3-当前状态"><a href="#5-美团-投递时间-2023-3-3-当前状态" class="headerlink" title="5.美团 投递时间:2023.3.3 当前状态:"></a>5.美团 投递时间:2023.3.3 当前状态:</h4><p><a href="https://zhaopin.meituan.com/web/personalCenter/deliveryRecord">https://zhaopin.meituan.com/web/personalCenter/deliveryRecord</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230304222946041.png" alt="image-20230304222946041"></p><h4 id="6-完美世界-投递时间-2023-3-4-当前状态"><a href="#6-完美世界-投递时间-2023-3-4-当前状态" class="headerlink" title="6.完美世界 投递时间:2023.3.4 当前状态:"></a>6.完美世界 投递时间:2023.3.4 当前状态:</h4><p><a href="https://app.mokahr.com/campus-recruitment/pwrd/45131#/candidateHome/applications">https://app.mokahr.com/campus-recruitment/pwrd/45131#/candidateHome/applications</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230304223807634.png" alt="image-20230304223807634"></p><h4 id="7-百度-投递时间-2023-3-4-当前状态"><a href="#7-百度-投递时间-2023-3-4-当前状态" class="headerlink" title="7.百度 投递时间:2023.3.4 当前状态:"></a>7.百度 投递时间:2023.3.4 当前状态:</h4><p><a href="https://talent.baidu.com/jobs/center">https://talent.baidu.com/jobs/center</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230304223930296.png" alt="image-20230304223930296"></p><h4 id="8-深信服-投递时间-2023-3-4-当前状态"><a href="#8-深信服-投递时间-2023-3-4-当前状态" class="headerlink" title="8.深信服 投递时间:2023.3.4 当前状态:"></a>8.深信服 投递时间:2023.3.4 当前状态:</h4><p><a href="https://hr.sangfor.com/personalCenter">https://hr.sangfor.com/personalCenter</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230304224546258.png" alt="image-20230304224546258"></p><h4 id="9-菜鸟-投递时间-2023-3-4-当前状态-无状态"><a href="#9-菜鸟-投递时间-2023-3-4-当前状态-无状态" class="headerlink" title="9.菜鸟 投递时间:2023.3.4 当前状态:无状态"></a>9.菜鸟 投递时间:2023.3.4 当前状态:无状态</h4><p><a href="https://jinshuju.net/f/K7M3Ia">https://jinshuju.net/f/K7M3Ia</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230304224753779.png" alt="image-20230304224753779"></p><h4 id="10-旷视科技-投递时间-2023-3-4-当前状态-初筛"><a href="#10-旷视科技-投递时间-2023-3-4-当前状态-初筛" class="headerlink" title="10.旷视科技 投递时间:2023.3.4 当前状态:初筛"></a>10.旷视科技 投递时间:2023.3.4 当前状态:初筛</h4><p><a href="https://app.mokahr.com/campus_apply/megviihr/38642#/candidateHome/applications">https://app.mokahr.com/campus_apply/megviihr/38642#/candidateHome/applications</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230304224959245.png" alt="image-20230304224959245"></p><h4 id="11-快手招聘-投递-2023-3-4-当前状态"><a href="#11-快手招聘-投递-2023-3-4-当前状态" class="headerlink" title="11.快手招聘 投递:2023.3.4 当前状态:"></a>11.快手招聘 投递:2023.3.4 当前状态:</h4><p><a href="https://zhaopin.kuaishou.cn/recruit/e/?time=1675865631504#/official/my-apply/">https://zhaopin.kuaishou.cn/recruit/e/?time=1675865631504#/official/my-apply/</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230304230615699.png" alt="image-20230304230615699"></p>]]></content>
      
      
      <categories>
          
          <category> 2024暑假实习 </category>
          
          <category> 工作 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 实习 </tag>
            
            <tag> 工作 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络笔记</title>
      <link href="/posts/db0b4310.html"/>
      <url>/posts/db0b4310.html</url>
      
        <content type="html"><![CDATA[<h1 id="计算机网络笔记"><a href="#计算机网络笔记" class="headerlink" title="计算机网络笔记"></a>计算机网络笔记</h1><p>计算机网络是互连的,自治的计算机集合</p><p>计算机网络组成:硬件,软件,协议</p><p><strong>计算网络性能指标:</strong></p><ul><li><strong>时延</strong>:<strong>发送时延=数据长度/信道带宽</strong>  <strong>传播时延=链路层长度/链路层传播速度</strong>  <strong>排队时延=未进入路由器排队耗费时间  处理时延=路由器处理数据耗费时间</strong></li><li><strong>时延带宽积=带宽*时延</strong></li><li><strong>RTT=2*传播时延</strong></li><li><strong>利用率=链路有数据通过的时间/总时间</strong></li><li><strong>速率=数据长度/发送时间</strong></li><li><strong>带宽=最大数据长度/发送时间</strong> </li><li><strong>吞吐量=单位时间内数据链路层容纳的数据</strong></li></ul><p><strong>计算机网络分层:</strong></p><p>7层OSI参考模型: 物理层,链路层,网络层,传输层,会话层,表示层,应用层</p><p>4层TCP/IP参考模型:应用层,传输层,网际层,物理层</p><p>5层模型:应用层,传输层,网络层,链路层,物理层</p><h3 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a><strong>物理层</strong></h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214200645233.png" alt="image-20230214200645233"></p><h5 id="1-数据通信的理论基础"><a href="#1-数据通信的理论基础" class="headerlink" title="1.数据通信的理论基础"></a>1.数据通信的理论基础</h5><ul><li>单行通信</li><li>双向交替通信</li><li>双向同时通信</li></ul><h5 id="2-数据通信的主要指标"><a href="#2-数据通信的主要指标" class="headerlink" title="2.数据通信的主要指标"></a>2.数据通信的主要指标</h5><ul><li>带宽:是指信号占据的频率范围</li><li>信号传输速率: F=2B(B为带宽)</li></ul><h5 id="3-信道的最大数据速率"><a href="#3-信道的最大数据速率" class="headerlink" title="3.信道的最大数据速率"></a>3.信道的最大数据速率</h5><p>​    Nyquist定理:最大传输速率=2WlogV(W为带宽,V为离散数)</p><p>​    香农定理:最大传输速率=Wlog(1+(S/N))</p><h5 id="4-编码"><a href="#4-编码" class="headerlink" title="4.编码"></a>4.编码</h5><ul><li>非归零编码</li><li>曼彻斯特编码</li><li>差分曼彻斯特编码</li></ul><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214194403184.png" alt="image-20230214194403184"></p><h5 id="5-物理层传输介质"><a href="#5-物理层传输介质" class="headerlink" title="5.物理层传输介质"></a>5.物理层传输介质</h5><h6 id="1-导向性介质"><a href="#1-导向性介质" class="headerlink" title="1.导向性介质"></a>1.导向性介质</h6><ul><li><p>双绞线:<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214194919853.png" alt="image-20230214194919853"></p></li><li><p>同轴电缆:<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214195030153.png" alt="image-20230214195030153"></p></li><li><p>光纤:<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214195210556.png" alt="image-20230214195210556"></p><p>​    <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214195244820.png" alt="image-20230214195244820"></p></li></ul><h6 id="2-非导向性介质"><a href="#2-非导向性介质" class="headerlink" title="2.非导向性介质"></a>2.非导向性介质</h6><ul><li><p>无线电波:较强穿透性</p></li><li><p>微波</p></li><li><p>红外线,激光</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214200031085.png" alt="image-20230214200031085"></p></li></ul><h5 id="6-物理层设备"><a href="#6-物理层设备" class="headerlink" title="6.物理层设备"></a>6.物理层设备</h5><ul><li>中继器:<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214200340184.png" alt="image-20230214200340184"></li><li>集线器:<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214200425981.png" alt="image-20230214200425981"></li></ul><h4 id="7-CSMA-CD协议"><a href="#7-CSMA-CD协议" class="headerlink" title="7.CSMA/CD协议"></a>7.CSMA/CD协议</h4><h5 id="习题"><a href="#习题" class="headerlink" title="习题"></a>习题</h5><h6 id="最短帧长"><a href="#最短帧长" class="headerlink" title="最短帧长"></a>最短帧长</h6><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230216223313571.png" alt="image-20230216223313571"></p><h6 id="等待时间"><a href="#等待时间" class="headerlink" title="等待时间"></a>等待时间</h6><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230216223231032.png" alt="image-20230216223231032"></p><h3 id="happy-数据链路层-hatched-chick"><a href="#happy-数据链路层-hatched-chick" class="headerlink" title=":happy:数据链路层:hatched_chick:"></a>:happy:数据链路层:hatched_chick:</h3><h5 id="1-数据链路层基本概念"><a href="#1-数据链路层基本概念" class="headerlink" title="1.数据链路层基本概念"></a>1.数据链路层基本概念</h5><p>​    <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214201116666.png" alt="image-20230214201116666"></p><h5 id="2-数据链路层功能概述"><a href="#2-数据链路层功能概述" class="headerlink" title="2.数据链路层功能概述"></a>2.数据链路层功能概述</h5><p>​    <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214201250036.png" alt="image-20230214201250036"></p><h5 id="3-成帧方法"><a href="#3-成帧方法" class="headerlink" title="3.成帧方法"></a>3.成帧方法</h5><ul><li>封装成帧</li></ul><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214201631471.png" alt="image-20230214201631471"></p><ul><li><p>透明传输</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214201738689.png" alt="image-20230214201738689"></p><ul><li> 字符填充法</li></ul><p>  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214202124075.png" alt="image-20230214202124075"></p><ul><li><p>零比特填充法</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214202332360.png" alt="image-20230214202332360"></p></li><li><p>违规编码法</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214202429962.png" alt="image-20230214202429962"></p></li></ul></li></ul><h5 id="4-差错控制"><a href="#4-差错控制" class="headerlink" title="4.差错控制"></a>4.差错控制</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214202930876.png" alt="image-20230214202930876"></p><ul><li><h6 id="奇偶校验码"><a href="#奇偶校验码" class="headerlink" title="奇偶校验码"></a>奇偶校验码</h6><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214203248003.png" alt="image-20230214203248003"></p></li><li><p><strong>CRC冗余校验码</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214204219925.png" alt="image-20230214204219925"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214204250012.png" alt="image-20230214204250012"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230214204358939.png" alt="image-20230214204358939"></p><p>​    </p></li></ul><h5 id="5-流量控制"><a href="#5-流量控制" class="headerlink" title="5.流量控制"></a>5.流量控制</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215134452401.png" alt="image-20230215134452401"></p><h6 id="停止等待协议"><a href="#停止等待协议" class="headerlink" title="停止等待协议"></a>停止等待协议</h6><p><strong>有差错情况:</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215135632539.png" alt="image-20230215135632539"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215140028338.png" alt="image-20230215140028338"></p><h6 id="信道利用率"><a href="#信道利用率" class="headerlink" title="信道利用率"></a><strong>信道利用率</strong></h6><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215140530087.png" alt="image-20230215140530087"></p><h6 id="选择重传协议"><a href="#选择重传协议" class="headerlink" title="选择重传协议"></a>选择重传协议</h6><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215142713475.png" alt="image-20230215142713475"></p><h6 id="后退N帧协议"><a href="#后退N帧协议" class="headerlink" title="后退N帧协议"></a>后退N帧协议</h6><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215152111342.png" alt="image-20230215152111342"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215152130674.png" alt="image-20230215152130674"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215152149523.png" alt="image-20230215152149523"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215152250207.png" alt="image-20230215152250207"></p><h3 id="hamster-网络层-carousel-horse"><a href="#hamster-网络层-carousel-horse" class="headerlink" title=":hamster:网络层:carousel_horse:"></a>:hamster:网络层:carousel_horse:</h3><h4 id="分组交换和报文交换"><a href="#分组交换和报文交换" class="headerlink" title="分组交换和报文交换"></a>分组交换和报文交换</h4><h5 id="分组交换"><a href="#分组交换" class="headerlink" title="分组交换"></a>分组交换</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215171358409.png" alt="image-20230215171358409"></p><h5 id="报文交换"><a href="#报文交换" class="headerlink" title="报文交换"></a>报文交换</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215171426073.png" alt="image-20230215171426073"></p><h6 id="习题-1"><a href="#习题-1" class="headerlink" title="习题"></a>习题</h6><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215172152172.png" alt="image-20230215172152172"></p><h5 id="对比"><a href="#对比" class="headerlink" title="对比"></a>对比</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215172422974.png" alt="image-20230215172422974"></p><h5 id="数据报"><a href="#数据报" class="headerlink" title="数据报"></a>数据报</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215173022719.png" alt="image-20230215173022719"></p><h5 id="虚电路"><a href="#虚电路" class="headerlink" title="虚电路"></a>虚电路</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215173200064.png" alt="image-20230215173200064"></p><h5 id="数据报和虚电路对比"><a href="#数据报和虚电路对比" class="headerlink" title="数据报和虚电路对比"></a>数据报和虚电路对比</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215173249942.png"></p><h4 id="路由算法"><a href="#路由算法" class="headerlink" title="路由算法"></a>路由算法</h4><h4 id="IP数据报格式"><a href="#IP数据报格式" class="headerlink" title="IP数据报格式"></a>IP数据报格式</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215195314905.png" alt="image-20230215195314905"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215200717251.png" alt="image-20230215200717251"></p><h4 id="IP数据报分片例题"><a href="#IP数据报分片例题" class="headerlink" title="IP数据报分片例题"></a>IP数据报分片例题</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215200550042.png" alt="image-20230215200550042"></p><h5 id="私有IP地址"><a href="#私有IP地址" class="headerlink" title="私有IP地址"></a>私有IP地址</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215201934490.png" alt="image-20230215201934490"></p><h5 id="分类IP地址"><a href="#分类IP地址" class="headerlink" title="分类IP地址"></a>分类IP地址</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230215202311400.png" alt="image-20230215202311400"></p><h4 id="子网划分例题"><a href="#子网划分例题" class="headerlink" title="子网划分例题"></a>子网划分例题</h4><p><a href="https://blog.csdn.net/weixin_46323495/article/details/122613499">https://blog.csdn.net/weixin_46323495/article/details/122613499</a></p><h4 id="路由算法例题"><a href="#路由算法例题" class="headerlink" title="路由算法例题"></a>路由算法例题</h4><p><a href="https://www.bilibili.com/video/BV1BJ411x7u8/">https://www.bilibili.com/video/BV1BJ411x7u8/</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230216225318914.png" alt="image-20230216225318914"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230216225410459.png" alt="image-20230216225410459"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230216230747797.png" alt="image-20230216230747797"></p><h3 id="cowboy-hat-face-传输层-call-me-hand"><a href="#cowboy-hat-face-传输层-call-me-hand" class="headerlink" title=":cowboy_hat_face:传输层:call_me_hand:"></a>:cowboy_hat_face:传输层:call_me_hand:</h3><h4 id="UDP概述"><a href="#UDP概述" class="headerlink" title="UDP概述"></a>UDP概述</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230216201149837.png" alt="image-20230216201149837"></p><h4 id="UDP首部格式"><a href="#UDP首部格式" class="headerlink" title="UDP首部格式"></a>UDP首部格式</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230216202214712.png" alt="image-20230216202214712"></p><h4 id="慢开始和拥塞避免"><a href="#慢开始和拥塞避免" class="headerlink" title="慢开始和拥塞避免"></a>慢开始和拥塞避免</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230216205855119.png" alt="image-20230216205855119"></p><h4 id="快重传和快恢复"><a href="#快重传和快恢复" class="headerlink" title="快重传和快恢复"></a>快重传和快恢复</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20230216210136641.png" alt="image-20230216210136641"></p>]]></content>
      
      
      <categories>
          
          <category> -计算机基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>寒假清单(2022.12.21~2023.2.4)</title>
      <link href="/posts/db0b4312.html"/>
      <url>/posts/db0b4312.html</url>
      
        <content type="html"><![CDATA[<h1 id="寒假清单-2022-12-21-2023-2-4"><a href="#寒假清单-2022-12-21-2023-2-4" class="headerlink" title="寒假清单(2022.12.21~2023.2.4)"></a>寒假清单(2022.12.21~2023.2.4)</h1><h2 id="1-Linux学习-https-www-bilibili-com-video-BV187411y7hF"><a href="#1-Linux学习-https-www-bilibili-com-video-BV187411y7hF" class="headerlink" title="1.Linux学习 https://www.bilibili.com/video/BV187411y7hF"></a>1.Linux学习 <a href="https://www.bilibili.com/video/BV187411y7hF">https://www.bilibili.com/video/BV187411y7hF</a></h2><h2 id="2-Git学习-https-www-bilibili-com-video-BV1FE411P7B3"><a href="#2-Git学习-https-www-bilibili-com-video-BV1FE411P7B3" class="headerlink" title="2.Git学习 https://www.bilibili.com/video/BV1FE411P7B3/"></a>2.Git学习 <a href="https://www.bilibili.com/video/BV1FE411P7B3/">https://www.bilibili.com/video/BV1FE411P7B3/</a></h2><h2 id="3-Redis学习-https-www-bilibili-com-video-BV1cr4y1671t"><a href="#3-Redis学习-https-www-bilibili-com-video-BV1cr4y1671t" class="headerlink" title="3.Redis学习 https://www.bilibili.com/video/BV1cr4y1671t/"></a>3.Redis学习 <a href="https://www.bilibili.com/video/BV1cr4y1671t/">https://www.bilibili.com/video/BV1cr4y1671t/</a></h2><h2 id="4-Python爬虫大作业-https-www-bilibili-com-video-BV1Db4y1m7Ho"><a href="#4-Python爬虫大作业-https-www-bilibili-com-video-BV1Db4y1m7Ho" class="headerlink" title="4.Python爬虫大作业 https://www.bilibili.com/video/BV1Db4y1m7Ho/"></a>4.Python爬虫大作业 <a href="https://www.bilibili.com/video/BV1Db4y1m7Ho/">https://www.bilibili.com/video/BV1Db4y1m7Ho/</a></h2><h2 id="5-spring-cloud-https-www-bilibili-com-video-BV1jJ411S7xr"><a href="#5-spring-cloud-https-www-bilibili-com-video-BV1jJ411S7xr" class="headerlink" title="5.spring cloud https://www.bilibili.com/video/BV1jJ411S7xr/"></a>5.spring cloud <a href="https://www.bilibili.com/video/BV1jJ411S7xr/">https://www.bilibili.com/video/BV1jJ411S7xr/</a></h2><h2 id="6-复习期末-恼-QAQ"><a href="#6-复习期末-恼-QAQ" class="headerlink" title="6.复习期末(恼!!!! QAQ)"></a>6.复习期末(恼!!!! QAQ)</h2>]]></content>
      
      
      <categories>
          
          <category> 日常生活 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>对接口参数加密,基于注解的AOP编程实现</title>
      <link href="/posts/db0b4311.html"/>
      <url>/posts/db0b4311.html</url>
      
        <content type="html"><![CDATA[<h1 id="对接口参数加密-基于注解的AOP编程实现"><a href="#对接口参数加密-基于注解的AOP编程实现" class="headerlink" title="对接口参数加密,基于注解的AOP编程实现"></a>对接口参数加密,基于注解的AOP编程实现</h1><p>  最近看了个关于接口验证的demo,用到了AOP编程,业务需求是对接口进行参数加密,在调用接口时,前端必须将参数进行加密,然受调用接口时必须将加密后的参数一并上传,后端拿到参数后必须对参数进行加密,之后拿到这段加密后的密钥与前端进行对比,然后判断参数是否被篡改.</p><h2 id="1-实现过程"><a href="#1-实现过程" class="headerlink" title="1.实现过程"></a>1.实现过程</h2><p>先对发送过来的请求头定义</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 请求头</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SIGN_HEADER</span> <span class="operator">=</span> <span class="string">&quot;X-SIGN&quot;</span>;</span><br></pre></td></tr></table></figure><p>定义切入点,因为使用注解标识需要使用参数加密的接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 切入点</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(@com.example.springbootdemo.annotation.Signature * *(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">verifySignPointCut</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// nothing</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>定义@Before注解下的方法,该方法主要通过对接受的参数判断有没有,以及进行加密</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   * 在切入点之前执行</span></span><br><span class="line"><span class="comment">   * */</span></span><br><span class="line">    <span class="meta">@Before(&quot;verifySignPointCut()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">verify</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> ((ServletRequestAttributes) Objects.requireNonNull(RequestContextHolder.getRequestAttributes())).getRequest();</span><br><span class="line">        <span class="type">String</span> <span class="variable">sign</span> <span class="operator">=</span> request.getHeader(SIGN_HEADER);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断请求头中有没有SIGN_HEADER参数,没有直接抛出异常</span></span><br><span class="line">        <span class="keyword">if</span> (CharSequenceUtil.isBlank(sign)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(<span class="string">&quot;no signature in header: &quot;</span> + SIGN_HEADER);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 调用generatedSignature(HttpRequest request)方法校验签名是否正确</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//得到参数签名,将生成的参数签名与请求头的参数进行比较,对比成功就通过,否则抛出异常</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">generatedSign</span> <span class="operator">=</span> generatedSignature(request);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!sign.equals(generatedSign)) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(<span class="string">&quot;invalid signature&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable throwable) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(<span class="string">&quot;invalid signat定义ure&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>定义generatedSignature方法,该方法用于获取requestBody中的参数</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String <span class="title function_">generatedSignature</span><span class="params">(HttpServletRequest request)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">       <span class="comment">// @RequestBody</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">bodyParam</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">       <span class="keyword">if</span> (request <span class="keyword">instanceof</span> ContentCachingRequestWrapper) &#123;</span><br><span class="line">           bodyParam = <span class="keyword">new</span> <span class="title class_">String</span>(((ContentCachingRequestWrapper) request).getContentAsByteArray(), StandardCharsets.UTF_8);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">// @RequestParam</span></span><br><span class="line">       Map&lt;String, String[]&gt; requestParameterMap = request.getParameterMap();</span><br><span class="line"></span><br><span class="line">       <span class="comment">// @PathVariable</span></span><br><span class="line">       String[] paths = <span class="literal">null</span>;</span><br><span class="line">       <span class="type">ServletWebRequest</span> <span class="variable">webRequest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletWebRequest</span>(request, <span class="literal">null</span>);</span><br><span class="line">       Map&lt;String, String&gt; uriTemplateVars = (Map&lt;String, String&gt;) webRequest.getAttribute(</span><br><span class="line">               HandlerMapping.URI_TEMPLATE_VARIABLES_ATTRIBUTE, RequestAttributes.SCOPE_REQUEST);</span><br><span class="line">       <span class="keyword">if</span> (!CollectionUtils.isEmpty(uriTemplateVars)) &#123;</span><br><span class="line">           paths = uriTemplateVars.values().toArray(<span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">0</span>]);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> SignUtil.sign(bodyParam, requestParameterMap, paths);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>SignUtil.sign()方法主要用于对参数进行加密用到了sha256加密,关于该加密算法详见百度</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SignUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEFAULT_SECRET</span> <span class="operator">=</span> <span class="string">&quot;1qaz@WSX#$%&amp;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">sign</span><span class="params">(String body, Map&lt;String, String[]&gt; params, String[] paths)</span> &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">if</span> (CharSequenceUtil.isNotBlank(body)) &#123;</span><br><span class="line">            sb.append(body).append(<span class="string">&#x27;#&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!CollectionUtils.isEmpty(params)) &#123;</span><br><span class="line">            params.entrySet()</span><br><span class="line">                    .stream()</span><br><span class="line">                    .sorted(Map.Entry.comparingByKey())</span><br><span class="line">                    .forEach(paramEntry -&gt; &#123;</span><br><span class="line">                        <span class="type">String</span> <span class="variable">paramValue</span> <span class="operator">=</span> String.join(<span class="string">&quot;,&quot;</span>, Arrays.stream(paramEntry.getValue()).sorted().toArray(String[]::<span class="keyword">new</span>));</span><br><span class="line">                        sb.append(paramEntry.getKey()).append(<span class="string">&quot;=&quot;</span>).append(paramValue).append(<span class="string">&#x27;#&#x27;</span>);</span><br><span class="line">                    &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (ArrayUtil.isNotEmpty(paths)) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">pathValues</span> <span class="operator">=</span> String.join(<span class="string">&quot;,&quot;</span>, Arrays.stream(paths).sorted().toArray(String[]::<span class="keyword">new</span>));</span><br><span class="line">            sb.append(pathValues);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> SecureUtil.sha256(String.join(<span class="string">&quot;#&quot;</span>, DEFAULT_SECRET, sb.toString()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-如何使用"><a href="#2-如何使用" class="headerlink" title="2.如何使用"></a>2.如何使用</h2><p>在需要参数校验的接口上加上注解</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20221230170755670.png" alt="image-20221230170755670"></p><p>在apipost上测试,加上加密后的字符串在请求头</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20221230170904278.png" alt="image-20221230170904278"></p><p>如果请求头密钥不匹配,则会抛出异常</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/%E6%96%87%E7%AB%A0/image-20221230171559520.png" alt="image-20221230171559520"></p><p>  <strong>通过该案例,我也复习了AOP编程,因为之前学习AOP的时候只跟着做了声明式事务,而关于AOP的其他方面了解不够升入,借这个案例复习了一遍AOP</strong>,<strong>over</strong></p><p>原作者:<a href="https://pdai.tech/md/spring/springboot/springboot-x-interface-jiami.html">https://pdai.tech/md/spring/springboot/springboot-x-interface-jiami.html</a></p>]]></content>
      
      
      <categories>
          
          <category> spring boot </category>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> spring </tag>
            
            <tag> spring boot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在spring boot中使用github图床和七牛云图床</title>
      <link href="/posts/db0b4313.html"/>
      <url>/posts/db0b4313.html</url>
      
        <content type="html"><![CDATA[<h1 id="在spring-boot中使用github图床和七牛云图床"><a href="#在spring-boot中使用github图床和七牛云图床" class="headerlink" title="在spring boot中使用github图床和七牛云图床"></a>在spring boot中使用github图床和七牛云图床</h1><p>​        作为一名后端,我们会无时无刻的接受前端发送过来的数据,这些数据大部分是文本请求,但前后端也会有许多文件交互,用户在上传一张图片或视频时,我们通常不会把她存放在<strong>MySQL</strong>数据库里,因为这样会极大的降低数据库的性能,最好的解决办法就是将图片存放在例如GitHub这样的开源托管网站,或者像<strong>阿里云</strong>或者<strong>七牛云</strong>这样的OSS服务器.</p><h2 id="1-在spring-boot中使用github图床"><a href="#1-在spring-boot中使用github图床" class="headerlink" title="1.在spring boot中使用github图床"></a>1.在spring boot中使用github图床</h2><p>我们打开我们的后端项目</p><p>先设置上传所需的必要参数,设置一个抽象类,里面有静态名称,方便以后直接引用</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Param</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String branch=<span class="string">&quot;main&quot;</span>;<span class="comment">//设置分支,这里填写main</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String name=<span class="string">&quot;awei&quot;</span>;<span class="comment">//你的姓名</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String email=<span class="string">&quot;xxxx@qq.com&quot;</span>;<span class="comment">//你的邮箱</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String OWNER=<span class="string">&quot;wllcnm&quot;</span>;<span class="comment">//GITHUB用户名</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String REPO=<span class="string">&quot;images&quot;</span>;<span class="comment">//仓库名</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String PATH=<span class="string">&quot;img/&quot;</span>;<span class="comment">//想要存放的路径,例如img/</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String Authorization=<span class="string">&quot;token &quot;</span>+<span class="string">&quot;填写你自己的密钥&quot;</span>;<span class="comment">//注意token后跟有空格</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>找到我们写的controller方法,前端上传一张图片给后端,我们返回这张图片的地址给前端</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation(&quot;上传文件&quot;)</span></span><br><span class="line">   <span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> R <span class="title function_">uploading</span><span class="params">(<span class="meta">@RequestParam(&quot;Image&quot;)</span> MultipartFile file)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">       <span class="comment">// 把上传文件内容Base64</span></span><br><span class="line">       <span class="comment">//String fileBase64 = encryptToBase64(filepath);</span></span><br><span class="line">       <span class="keyword">if</span> (file.isEmpty()) &#123;</span><br><span class="line">           <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">LinfengException</span>(<span class="string">&quot;上传文件不能为空&quot;</span>);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="type">byte</span>[] bytes = file.getBytes();</span><br><span class="line">       <span class="type">String</span> <span class="variable">fileBase64</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(Objects.requireNonNull(Base64.encodeBase64(bytes)));</span><br><span class="line"></span><br><span class="line">       <span class="comment">//获取文件后缀</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">       <span class="comment">// 重置文件名防止重复</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> UUID.randomUUID().toString().replace(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>) + originalFilename;</span><br><span class="line">       <span class="type">JSONObject</span> <span class="variable">param</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">       param.put(<span class="string">&quot;message&quot;</span>, <span class="string">&quot;这是一张图片&quot;</span>);<span class="comment">// 提交描述</span></span><br><span class="line">       param.put(<span class="string">&quot;content&quot;</span>, fileBase64);<span class="comment">// Base64过的文件</span></span><br><span class="line">       param.put(<span class="string">&quot;branch&quot;</span>, Param.branch);<span class="comment">// 上传到仓库的分支，以前是master;2020.10.01开始就变成了main了</span></span><br><span class="line">       <span class="type">JSONObject</span> <span class="variable">committer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">       committer.put(<span class="string">&quot;name&quot;</span>, Param.name); <span class="comment">// 提交的作者或提交者的姓名</span></span><br><span class="line">       committer.put(<span class="string">&quot;email&quot;</span>, Param.email);<span class="comment">// 提交的作者或提交者的电子邮件</span></span><br><span class="line">       param.put(<span class="string">&quot;committer&quot;</span>, committer);</span><br><span class="line">       param.put(<span class="string">&quot;sha&quot;</span>, <span class="string">&quot;&quot;</span>);<span class="comment">// 添加的时候没有参数也要写&quot;&quot;</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://api.github.com/repos/OWNER/REPO/contents/PATH&quot;</span>;</span><br><span class="line">       url = url.replace(<span class="string">&quot;OWNER&quot;</span>, Param.OWNER)<span class="comment">// 存储库的帐户所有者。名称不区分大小写</span></span><br><span class="line">               .replace(<span class="string">&quot;REPO&quot;</span>, Param.REPO)<span class="comment">// 仓库名称</span></span><br><span class="line">               .replace(<span class="string">&quot;PATH&quot;</span>, Param.PATH);<span class="comment">// 存储仓库里面的路径</span></span><br><span class="line">       url = url + fileName;</span><br><span class="line"></span><br><span class="line">       <span class="type">HttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> HttpRequest.put(url)</span><br><span class="line">               .header(<span class="string">&quot;Accept&quot;</span>, <span class="string">&quot;application/vnd.github+json&quot;</span>)</span><br><span class="line">               .header(<span class="string">&quot;Authorization&quot;</span>, Param.Authorization).body(param.toString()).execute();</span><br><span class="line">       log.info(<span class="string">&quot;响应结果：&#123;&#125;&quot;</span>, response.body());</span><br><span class="line">       <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSONObject.parseObject(response.body());</span><br><span class="line">       <span class="comment">// 取出访问地址</span></span><br><span class="line">       <span class="type">JSONObject</span> <span class="variable">content</span> <span class="operator">=</span> jsonObject.getJSONObject(<span class="string">&quot;content&quot;</span>);</span><br><span class="line">       <span class="type">String</span> <span class="variable">download_url</span> <span class="operator">=</span> content.getString(<span class="string">&quot;download_url&quot;</span>);</span><br><span class="line">       log.info(download_url);</span><br><span class="line">       <span class="keyword">return</span> R.ok().put(<span class="string">&quot;result&quot;</span>, download_url);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>这里将图片转为base64格式,压缩了图片的大小,提高了传输效率</p><h2 id="2-在spring-boot中使用七牛云"><a href="#2-在spring-boot中使用七牛云" class="headerlink" title="2.在spring boot中使用七牛云"></a>2.在spring boot中使用七牛云</h2><p>我们打开七牛云</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/img/image-20221205001040409.png" alt="image-20221205001040409"></p><p>复制<strong>AK</strong>和<strong>SK</strong></p><p>图片文件上传的工具类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.admin.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.qiniu.storage.Configuration;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.storage.Region;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.storage.UploadManager;</span><br><span class="line"><span class="keyword">import</span> com.qiniu.util.Auth;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QiNiuUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;qiniu.accessKey&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span>  String accessKey;      <span class="comment">//公钥</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;qiniu.secretKey&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span>  String accessSecretKey;   <span class="comment">//私钥</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;qiniu.bucketName&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span>  String bucket;   <span class="comment">// 存储空间</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;qiniu.imageUrl&#125;&quot;)</span><span class="comment">//# 域名/路径</span></span><br><span class="line">    <span class="keyword">private</span>  String url;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 处理多文件</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> multipartFiles</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span>  Map&lt;String, List&lt;String&gt;&gt; <span class="title function_">uploadImages</span><span class="params">(MultipartFile[] multipartFiles)</span> &#123;</span><br><span class="line">        Map&lt;String, List&lt;String&gt;&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        List&lt;String&gt; imageUrls = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (MultipartFile file : multipartFiles) &#123;</span><br><span class="line">            imageUrls.add(uploadImageQiniu(file));</span><br><span class="line">        &#125;</span><br><span class="line">        map.put(<span class="string">&quot;imageUrl&quot;</span>, imageUrls);</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 上传图片到七牛云</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> multipartFile</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>  String <span class="title function_">uploadImageQiniu</span><span class="params">(MultipartFile multipartFile)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1、获取文件上传的流</span></span><br><span class="line">            <span class="type">byte</span>[] fileBytes = multipartFile.getBytes();</span><br><span class="line">            <span class="comment">//2、创建日期目录分隔</span></span><br><span class="line">            <span class="type">SimpleDateFormat</span> <span class="variable">dateFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy/MM/dd&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">datePath</span> <span class="operator">=</span> dateFormat.format(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line"></span><br><span class="line">            <span class="comment">//3、获取文件名</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> multipartFile.getOriginalFilename();</span><br><span class="line">            <span class="type">String</span> <span class="variable">suffix</span> <span class="operator">=</span> originalFilename.substring(originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line">            <span class="type">String</span> <span class="variable">filename</span> <span class="operator">=</span> datePath + <span class="string">&quot;/&quot;</span> + UUID.randomUUID().toString().replace(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>) + suffix;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//4.构造一个带指定 Region 对象的配置类</span></span><br><span class="line">            <span class="comment">//Region.南(根据自己的对象空间的地址选</span></span><br><span class="line">            <span class="type">Configuration</span> <span class="variable">cfg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Configuration</span>(Region.huanan());</span><br><span class="line">            <span class="comment">//后来换了稳定的新加坡的空间并且绑定了个人域名没有做https的配置这时候要配置这个选项</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             *域名不支持https访问会报错ssl验证error</span></span><br><span class="line"><span class="comment">             *cfh.useHttpsDomains=false</span></span><br><span class="line"><span class="comment">             * 关闭实列即可 默认是开启的</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            cfg.useHttpsDomains = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">            <span class="type">UploadManager</span> <span class="variable">uploadManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UploadManager</span>(cfg);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//5.获取七牛云提供的 token</span></span><br><span class="line">            <span class="type">Auth</span> <span class="variable">auth</span> <span class="operator">=</span> Auth.create(accessKey, accessSecretKey);</span><br><span class="line">            <span class="type">String</span> <span class="variable">upToken</span> <span class="operator">=</span> auth.uploadToken(bucket);</span><br><span class="line">            uploadManager.put(fileBytes, filename, upToken);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> url + filename;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>AK</strong>和<strong>SK</strong>写在配置文件中<strong>application.yal</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">qiniu:</span></span><br><span class="line">  <span class="comment"># 文件大小用户端和后台管理端 单位M</span></span><br><span class="line">  <span class="attr">max-size:</span> <span class="number">30</span></span><br><span class="line">  <span class="attr">admin-max-size:</span> <span class="number">30</span></span><br><span class="line">  <span class="comment">#AK</span></span><br><span class="line">  <span class="attr">accessKey:</span> </span><br><span class="line">  <span class="comment">#SK</span></span><br><span class="line">  <span class="attr">secretKey:</span> </span><br><span class="line">  <span class="comment">#七牛的仓库名</span></span><br><span class="line">  <span class="attr">bucketName:</span> </span><br><span class="line">  <span class="comment">#图片存放路径</span></span><br><span class="line">  <span class="attr">imageUrl:</span> </span><br></pre></td></tr></table></figure><h3 id="在Typora中使用七牛云"><a href="#在Typora中使用七牛云" class="headerlink" title="在Typora中使用七牛云"></a>在<strong>Typora</strong>中使用七牛云</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/img/image-20221205001602280.png" alt="image-20221205001602280"></p><p>注意设定访问网址这一栏需要加**http://<strong>前缀,如果支持</strong>https://**就加上,否则Typora无法通过外链访问</p><h4 id="Typora设置"><a href="#Typora设置" class="headerlink" title="Typora设置"></a>Typora设置</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="http://oss.lw123.top/img/image-20221205001837582.png" alt="image-20221205001837582"></p><p>ok,到这就结束了</p>]]></content>
      
      
      <categories>
          
          <category> spring boot </category>
          
          <category> 图床 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> spring </tag>
            
            <tag> spring boot </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在spring boot中使用github图床和七牛云图床</title>
      <link href="/posts/db0b4319.html"/>
      <url>/posts/db0b4319.html</url>
      
        <content type="html"><![CDATA[<h1 id="在Minio中分片上传文件和分片下载文件"><a href="#在Minio中分片上传文件和分片下载文件" class="headerlink" title="在Minio中分片上传文件和分片下载文件"></a>在Minio中分片上传文件和分片下载文件</h1><h3 id="分片上传和下载文件"><a href="#分片上传和下载文件" class="headerlink" title="分片上传和下载文件"></a>分片上传和下载文件</h3><p>  最近想将了解下分布式文件系统,现在市面上比较有名的分布式文件系统有Minio等,作为一个开源的分布式文件系统,Minio十分的优秀.</p><p><strong>本地文件分块和合并测试方法</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuecheng;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.minio.ComposeObjectArgs;</span><br><span class="line"><span class="keyword">import</span> io.minio.ComposeSource;</span><br><span class="line"><span class="keyword">import</span> io.minio.UploadObjectArgs;</span><br><span class="line"><span class="keyword">import</span> io.minio.errors.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.codec.cli.Digest;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.codec.digest.DigestUtils;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.security.InvalidKeyException;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.xuecheng.MinioTest.minioClient;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BigFileTest</span> &#123;</span><br><span class="line">    <span class="comment">//测试文件分块方法</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testChunk</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//需要分块的文件</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">sourceFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;G:\\电影\\[阳光电影-www.ygdy8.com]我的大叔-01.mp4&quot;</span>);</span><br><span class="line">        <span class="comment">//分块后存放目录</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">chunkPath</span> <span class="operator">=</span> <span class="string">&quot;G:\\电影\\新建文件夹\\&quot;</span>; <span class="comment">//分块路径</span></span><br><span class="line">        <span class="comment">//将分块目录转变为File文件</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">chunkFolder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(chunkPath);</span><br><span class="line">        <span class="comment">//判断目标文件夹是否存在,如果没有则创建</span></span><br><span class="line">        <span class="keyword">if</span> (!chunkFolder.exists()) &#123;</span><br><span class="line">            chunkFolder.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//分块大小,5MB</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">chunkSize</span> <span class="operator">=</span> <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">5</span>;  <span class="comment">//5MB</span></span><br><span class="line">        <span class="comment">//分块数量,向上取整</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">chunkNum</span> <span class="operator">=</span> (<span class="type">long</span>) Math.ceil(sourceFile.length() * <span class="number">1.0</span> / chunkSize);</span><br><span class="line">        System.out.println(<span class="string">&quot;总共有&quot;</span> + chunkNum + <span class="string">&quot;块&quot;</span>);</span><br><span class="line">        <span class="comment">//缓冲区大小</span></span><br><span class="line">        <span class="type">byte</span>[] b = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="comment">//使用RandomAccessFile读取文件,使用模式&quot;r&quot;</span></span><br><span class="line">        <span class="type">RandomAccessFile</span> <span class="variable">raf_read</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RandomAccessFile</span>(sourceFile, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">        <span class="comment">//分块</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; chunkNum; i++) &#123;</span><br><span class="line">            <span class="comment">//创建分块文件</span></span><br><span class="line">            <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(chunkPath + i);</span><br><span class="line">            <span class="keyword">if</span> (file.exists()) &#123;</span><br><span class="line">                file.delete();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">newFile</span> <span class="operator">=</span> file.createNewFile();</span><br><span class="line">            <span class="keyword">if</span> (newFile) &#123;</span><br><span class="line">                <span class="comment">//向分块文件中写数据</span></span><br><span class="line">                <span class="type">RandomAccessFile</span> <span class="variable">raf_write</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RandomAccessFile</span>(file, <span class="string">&quot;rw&quot;</span>);</span><br><span class="line">                <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">while</span> ((len = raf_read.read(b)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                    raf_write.write(b, <span class="number">0</span>, len);</span><br><span class="line">                    <span class="keyword">if</span> (file.length() &gt;= chunkSize) &#123;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                raf_write.close();</span><br><span class="line">                System.out.println(<span class="string">&quot;完成分块&quot;</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        raf_read.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testMerge</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//分块文件目录</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">chunkFolder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;G:\\电影\\新建文件夹\\&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//源文件</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">sourceFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;G:\\电影\\j击d巨r.最终季.完结篇.前篇.2023.HD1080p.中文字幕.mp4&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//合并后的文件</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">newFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;G:\\电影\\j击d巨r.最终季.完结篇.前篇.2023.HD1080p.中文字幕01.mp4&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//取出所有分块文件</span></span><br><span class="line">        File[] files = chunkFolder.listFiles();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将数组转变为list</span></span><br><span class="line">        List&lt;File&gt; fileList = Arrays.asList(files);</span><br><span class="line"></span><br><span class="line">        Collections.sort(fileList, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;File&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(File o1, File o2)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> Integer.parseInt(o1.getName()) - Integer.parseInt(o2.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//向合并文件写的流</span></span><br><span class="line">        <span class="type">RandomAccessFile</span> <span class="variable">raf_w</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RandomAccessFile</span>(newFile, <span class="string">&quot;rw&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="comment">//遍历分块文件</span></span><br><span class="line">        <span class="keyword">for</span> (File file : fileList) &#123;</span><br><span class="line">            <span class="type">RandomAccessFile</span> <span class="variable">raf_r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RandomAccessFile</span>(file, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> ((len = raf_r.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                raf_w.write(bytes, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">            raf_r.close();</span><br><span class="line">        &#125;</span><br><span class="line">        raf_w.close();</span><br><span class="line">        <span class="comment">//合并文件进行校验</span></span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">source_md5</span> <span class="operator">=</span> DigestUtils.md5Hex(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(sourceFile));</span><br><span class="line">        <span class="type">String</span> <span class="variable">target_md5</span> <span class="operator">=</span> DigestUtils.md5Hex(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(newFile));</span><br><span class="line">        <span class="keyword">if</span> (source_md5.equals(target_md5)) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;合并成功&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;合并失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testChunkTOMinio</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">112</span>; i++) &#123;</span><br><span class="line">                <span class="type">UploadObjectArgs</span> <span class="variable">testbucket</span> <span class="operator">=</span> UploadObjectArgs.builder()</span><br><span class="line">                        .bucket(<span class="string">&quot;testbucket&quot;</span>)</span><br><span class="line">                        .object(<span class="string">&quot;chunk/&quot;</span> + i)</span><br><span class="line">                        .filename(<span class="string">&quot;G:\\电影\\新建文件夹\\&quot;</span> + i)</span><br><span class="line">                        .build();</span><br><span class="line">                minioClient.uploadObject(testbucket);</span><br><span class="line">                System.out.println(<span class="string">&quot;上传分块&quot;</span> + i + <span class="string">&quot;成功&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;上传出错&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testMergeTOMinio</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            List&lt;ComposeSource&gt; composeSourceList = Stream.iterate(<span class="number">0</span>, i -&gt; ++i).limit(<span class="number">111</span>).map(i -&gt; ComposeSource.builder().bucket(<span class="string">&quot;testbucket&quot;</span>).object(<span class="string">&quot;chunk/&quot;</span> + i).build()).collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">            <span class="type">ComposeObjectArgs</span> <span class="variable">composeObjectArgs</span> <span class="operator">=</span> ComposeObjectArgs.builder()</span><br><span class="line">                    .bucket(<span class="string">&quot;testbucket&quot;</span>)</span><br><span class="line">                    .object(<span class="string">&quot;new.mp4&quot;</span>)</span><br><span class="line">                    .sources(composeSourceList)</span><br><span class="line">                    .build();</span><br><span class="line">            minioClient.composeObject(composeObjectArgs);</span><br><span class="line">            System.out.println(<span class="string">&quot;合并成功&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;合并失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ServerException, InsufficientDataException, ErrorResponseException, NoSuchAlgorithmException, InvalidKeyException, InvalidResponseException, XmlParserException, InternalException &#123;</span><br><span class="line">        <span class="type">UploadObjectArgs</span> <span class="variable">testbucket</span> <span class="operator">=</span> UploadObjectArgs.builder()</span><br><span class="line">                .bucket(<span class="string">&quot;testbucket&quot;</span>)</span><br><span class="line">                .object(<span class="string">&quot;chunk/&quot;</span> + <span class="number">225</span>)</span><br><span class="line">                .filename(<span class="string">&quot;G:\\电影\\新建文件夹\\&quot;</span> + <span class="number">225</span>)</span><br><span class="line">                .build();</span><br><span class="line">        minioClient.uploadObject(testbucket);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>Minio分块和合并代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuecheng;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.minio.ComposeObjectArgs;</span><br><span class="line"><span class="keyword">import</span> io.minio.ComposeSource;</span><br><span class="line"><span class="keyword">import</span> io.minio.MinioClient;</span><br><span class="line"><span class="keyword">import</span> io.minio.UploadObjectArgs;</span><br><span class="line"><span class="keyword">import</span> io.minio.errors.*;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.RandomAccessFile;</span><br><span class="line"><span class="keyword">import</span> java.security.InvalidKeyException;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.xuecheng.MinioTest.minioClient;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BigFileTest2</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testUploadBigFile</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">File</span> <span class="variable">sourceFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;G:\\电影\\绝命律师.Better.Call.Saul.S01E01.中英字幕.BD-HR.AAC.1024x576.x264.mp4&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">folder</span> <span class="operator">=</span> <span class="string">&quot;G:\\电影\\新建文件夹 (2)\\&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">File</span> <span class="variable">targetFolder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;G:\\电影\\新建文件夹 (2)\\&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!targetFolder.exists()) &#123;</span><br><span class="line">            targetFolder.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">chunkSize</span> <span class="operator">=</span> <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">chunkNum</span> <span class="operator">=</span> (<span class="type">long</span>) Math.ceil(sourceFile.length() * <span class="number">1.0</span> / chunkSize);</span><br><span class="line"></span><br><span class="line">        <span class="type">RandomAccessFile</span> <span class="variable">raf_r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RandomAccessFile</span>(sourceFile, <span class="string">&quot;r&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; chunkNum; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            <span class="type">File</span> <span class="variable">chunkFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(folder + i);</span><br><span class="line"></span><br><span class="line">            <span class="type">RandomAccessFile</span> <span class="variable">raf_w</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RandomAccessFile</span>(chunkFile, <span class="string">&quot;rw&quot;</span>);</span><br><span class="line">            <span class="keyword">while</span> ((len = raf_r.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                raf_w.write(bytes, <span class="number">0</span>, len);</span><br><span class="line">                <span class="keyword">if</span> (chunkFile.length() &gt;= chunkSize) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            raf_w.close();</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;分块&quot;</span> + i + <span class="string">&quot;完成&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        raf_r.close();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testMergeBigFile</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">File</span> <span class="variable">targetFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;G:\\电影\\绝命毒师.mp4&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">folder</span> <span class="operator">=</span> <span class="string">&quot;G:\\电影\\新建文件夹 (2)\\&quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="type">File</span> <span class="variable">fileFolder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(folder);</span><br><span class="line"></span><br><span class="line">            File[] files = fileFolder.listFiles();</span><br><span class="line"></span><br><span class="line">            List&lt;File&gt; fileList = Arrays.asList(files);</span><br><span class="line"></span><br><span class="line">            Collections.sort(fileList, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;File&gt;() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(File o1, File o2)</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> Integer.valueOf(o1.getName()) - Integer.valueOf(o2.getName());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="type">RandomAccessFile</span> <span class="variable">raf_w</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RandomAccessFile</span>(targetFile, <span class="string">&quot;rw&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">for</span> (File file : fileList) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">                <span class="type">RandomAccessFile</span> <span class="variable">raf_r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RandomAccessFile</span>(<span class="keyword">new</span> <span class="title class_">File</span>(folder + file.getName()), <span class="string">&quot;r&quot;</span>);</span><br><span class="line">                <span class="keyword">while</span> ((len = raf_r.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                    raf_w.write(bytes, <span class="number">0</span>, len);</span><br><span class="line">                &#125;</span><br><span class="line">                raf_r.close();</span><br><span class="line">            &#125;</span><br><span class="line">            raf_w.close();</span><br><span class="line">            System.out.println(<span class="string">&quot;合并成功&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;合并失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testToMinio</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">folder</span> <span class="operator">=</span> <span class="string">&quot;G:\\电影\\新建文件夹 (2)\\&quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">102</span>; i++) &#123;</span><br><span class="line">                <span class="type">UploadObjectArgs</span> <span class="variable">testupload</span> <span class="operator">=</span> UploadObjectArgs.builder()</span><br><span class="line">                        .bucket(<span class="string">&quot;testbucket&quot;</span>)</span><br><span class="line">                        .object(<span class="string">&quot;chunk1/&quot;</span> + i)</span><br><span class="line">                        .filename(folder + i)</span><br><span class="line">                        .build();</span><br><span class="line">                minioClient.uploadObject(testupload);</span><br><span class="line">                System.out.println(<span class="string">&quot;上传块&quot;</span> + i + <span class="string">&quot;成功&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(e.getMessage());</span><br><span class="line">            System.out.println(<span class="string">&quot;上传失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">mergeToMinio</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            List&lt;ComposeSource&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">102</span>; i++) &#123;</span><br><span class="line">                <span class="type">ComposeSource</span> <span class="variable">composeSource</span> <span class="operator">=</span> ComposeSource.builder()</span><br><span class="line">                        .bucket(<span class="string">&quot;testbucket&quot;</span>)</span><br><span class="line">                        .object(<span class="string">&quot;chunk1/&quot;</span> + i)</span><br><span class="line">                        .build();</span><br><span class="line">                list.add(composeSource);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">ComposeObjectArgs</span> <span class="variable">composeObjectArgs</span> <span class="operator">=</span> ComposeObjectArgs.builder()</span><br><span class="line">                    .bucket(<span class="string">&quot;testbucket&quot;</span>)</span><br><span class="line">                    .object(<span class="string">&quot;new2.mp4&quot;</span>)</span><br><span class="line">                    .sources(list)</span><br><span class="line">                    .build();</span><br><span class="line"></span><br><span class="line">            minioClient.composeObject(composeObjectArgs);</span><br><span class="line">            System.out.println(<span class="string">&quot;合并成功&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;合并失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>Minio上传分块文件</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuecheng;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.j256.simplemagic.ContentInfo;</span><br><span class="line"><span class="keyword">import</span> com.j256.simplemagic.ContentInfoUtil;</span><br><span class="line"><span class="keyword">import</span> io.minio.*;</span><br><span class="line"><span class="keyword">import</span> io.minio.errors.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.codec.digest.DigestUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.IOUtils;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.MediaType;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.print.attribute.standard.Media;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.security.InvalidKeyException;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MinioTest</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">MinioClient</span> <span class="variable">minioClient</span> <span class="operator">=</span></span><br><span class="line">            MinioClient.builder()</span><br><span class="line">                    .endpoint(<span class="string">&quot;http://47.236.25.30:9000&quot;</span>)</span><br><span class="line">                    .credentials(<span class="string">&quot;awei&quot;</span>, <span class="string">&quot;awei123456&quot;</span>)</span><br><span class="line">                    .build();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">upload</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="type">ContentInfo</span> <span class="variable">mimeTypeMatch</span> <span class="operator">=</span> ContentInfoUtil.findMimeTypeMatch(<span class="string">&quot;.mp4&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">mimeType</span> <span class="operator">=</span> MediaType.APPLICATION_OCTET_STREAM_VALUE;</span><br><span class="line">            <span class="keyword">if</span> (mimeTypeMatch != <span class="literal">null</span>) &#123;</span><br><span class="line">                mimeType = mimeTypeMatch.getMimeType();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">UploadObjectArgs</span> <span class="variable">testbucket</span> <span class="operator">=</span> UploadObjectArgs.builder()</span><br><span class="line">                    .bucket(<span class="string">&quot;video&quot;</span>)</span><br><span class="line">                    .object(<span class="string">&quot;英雄联盟.mp4&quot;</span>)</span><br><span class="line">                    .filename(<span class="string">&quot;C:\\Users\\wllcnm\\Pictures\\5b0cb55be7bce736a953cdb1.jpg&quot;</span>)</span><br><span class="line">                    .contentType(mimeType)</span><br><span class="line">                    .build();</span><br><span class="line">            minioClient.uploadObject(testbucket);</span><br><span class="line">            System.out.println(<span class="string">&quot;上传成功&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(<span class="string">&quot;上传失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="type">RemoveObjectArgs</span> <span class="variable">removeObjectArgs</span> <span class="operator">=</span> RemoveObjectArgs.builder()</span><br><span class="line">                    .bucket(<span class="string">&quot;video&quot;</span>)</span><br><span class="line">                    .object(<span class="string">&quot;英雄联盟.mp4&quot;</span>)</span><br><span class="line">                    .build();</span><br><span class="line">            minioClient.removeObject(removeObjectArgs);</span><br><span class="line">            System.out.println(<span class="string">&quot;删除成功&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(<span class="string">&quot;删除失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">get</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">GetObjectArgs</span> <span class="variable">getObjectArgs</span> <span class="operator">=</span> GetObjectArgs.builder().bucket(<span class="string">&quot;photo&quot;</span>).object(<span class="string">&quot;绿图/033c92a936a735071c85d134618baa1a2e29893a.jpg&quot;</span>).build();</span><br><span class="line"></span><br><span class="line">        <span class="type">FilterInputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> minioClient.getObject(getObjectArgs);  <span class="comment">//网络流</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//指定输出流</span></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;G:\\web后端\\学成在线文件仓库\\033c92a936a735071c85d134618baa1a2e29893a1.jpg&quot;</span>));</span><br><span class="line"></span><br><span class="line">        IOUtils.copy(inputStream, outputStream);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//校验文件完整性,校验md5</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">source_md5</span> <span class="operator">=</span> DigestUtils.md5Hex(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;G:\\web后端\\学成在线文件仓库\\033c92a936a735071c85d134618baa1a2e29893a.jpg&quot;</span>))); <span class="comment">//minio中的md5文件</span></span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">target_md5</span> <span class="operator">=</span> DigestUtils.md5Hex(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;G:\\web后端\\学成在线文件仓库\\033c92a936a735071c85d134618baa1a2e29893a1.jpg&quot;</span>)));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (source_md5.equals(target_md5)) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;下载成功&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;下载失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 文件管理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> spring </tag>
            
            <tag> spring boot </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo博客中使用矢量图标设置社交媒体图标和网站图标</title>
      <link href="/posts/db0b4314.html"/>
      <url>/posts/db0b4314.html</url>
      
        <content type="html"><![CDATA[<h1 id="hexo博客中使用矢量图标设置社交媒体图标和网站图标"><a href="#hexo博客中使用矢量图标设置社交媒体图标和网站图标" class="headerlink" title="hexo博客中使用矢量图标设置社交媒体图标和网站图标"></a>hexo博客中使用矢量图标设置社交媒体图标和网站图标</h1><h3 id="1-使用标签样式"><a href="#1-使用标签样式" class="headerlink" title="1.使用标签样式"></a>1.使用标签样式</h3><p>在hexo中想要使用矢量图标,首先进入**<a href="https://fontawesome.com/**%E6%90%9C%E7%B4%A2%E8%87%AA%E5%B7%B1%E6%83%B3%E8%A6%81%E7%9A%84%E5%9B%BE%E6%A0%87,%E6%88%91%E4%BB%AC%E9%9A%8F%E6%84%8F%E6%89%BE%E5%88%B0%E4%B8%80%E4%B8%AA%E5%9B%BE%E6%A0%87">https://fontawesome.com/**搜索自己想要的图标,我们随意找到一个图标</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/wllcnm/images/img/image-20221204145554857.png" alt="image-20221204145554857"></p><p>复制图片中的<strong>html</strong>标签中的<strong>class</strong>内容</p><p>打开自己的hexo工程,打开**_config.butterfly.yml**文件,例如我们想要更该社交媒体的图标,我们找到social这一项,最左边的填我们刚刚复制的内容,之后按照 <strong>网址|| 简介</strong>的格式填写</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/wllcnm/images/img/image-20221204150144945.png" alt="image-20221204150144945"></p><p>完成后就可以看到效果了</p><h3 id="2-下载svg文件-在工程中通过绝对路径引用-并设置网站图标"><a href="#2-下载svg文件-在工程中通过绝对路径引用-并设置网站图标" class="headerlink" title="2.下载svg文件,在工程中通过绝对路径引用,并设置网站图标"></a>2.下载svg文件,在工程中通过绝对路径引用,并设置网站图标</h3><p>我们打开阿里的矢量图网站</p><p>[<a href="https://www.iconfont.cn/]">https://www.iconfont.cn/]</a>: </p><p>打开一个图标</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/wllcnm/images/img/image-20221204150755896.png" alt="image-20221204150755896"></p><p>点击下载,将下载的svg文件保存在hexo工程中的source/_post/img/svg文件夹中</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/wllcnm/images/img/image-20221204150922363.png" alt="image-20221204150922363"></p><p>之后我们打开**_config.butterfly.yml**配置文件,找到favicon这一项,没有的可以加上</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/wllcnm/images/img/image-20221204151044472.png" alt="image-20221204151044472"></p><p>最后在控制台输入<strong>hexo s</strong></p><p>打开网站,就可以看到效果了</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/wllcnm/images/img/image-20221204151207212.png" alt="image-20221204151207212"></p>]]></content>
      
      
      <categories>
          
          <category> hexo博客搭建 </category>
          
          <category> font-awesome图标 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> spring </tag>
            
            <tag> spring boot </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我的第一篇文章</title>
      <link href="/posts/7a776471.html"/>
      <url>/posts/7a776471.html</url>
      
        <content type="html"><![CDATA[<p>##第一篇文章</p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
